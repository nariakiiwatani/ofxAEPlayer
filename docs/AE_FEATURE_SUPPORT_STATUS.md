# After Effects 機能対応状況

このドキュメントは、After Effectsで作成したコンポジションを書き出して再生した際に、どの機能が再現されるかをまとめたものです。

## 凡例

- ✅ **対応**: 完全に再現されます
- ⚠️ **部分対応**: 一部の機能のみ再現されます
- ❌ **未対応**: 再現されません

---

## 1. レイヤー

### 1.1 レイヤータイプ

| プロパティ | 対応状況 | 備考 |
|-----------|---------|------|
| ヌルオブジェクト | ✅ | |
| シェイプレイヤー | ✅ | |
| 平面 | ✅ | |
| 静止画 | ✅ | |
| 動画 | ⚠️ | 問題が出やすいのであまり使いたくない |
| 画像シーケンス | ✅ | |
| プリコンポジション | ✅ | |
| テキスト | ⚠️ | 自動ベイク機能により実用可能 |
| カメラ | ❌ | |
| ライト | ❌ | |
| 調整レイヤー | ❌ | |

### 1.2 レイヤープロパティ

#### トランスフォーム

| プロパティ | 対応状況 | 備考 |
|-----------|---------|------|
| アンカーポイント | ✅ | |
| 位置 | ✅ | |
| スケール | ✅ | |
| 回転 | ✅ | Z回転のみ対応 |
| 不透明度 | ✅ | |
| X回転 | ❌ | 3D機能は未対応 |
| Y回転 | ❌ | 3D機能は未対応 |
| 方向 | ❌ | 3D機能は未対応 |

#### レイヤーの設定

| 機能 | 対応状況 | 備考 |
|------|---------|------|
| 親子関係 | ✅ | |
| イン点・アウト点 | ✅ | |
| 表示/非表示 | ✅ | |
| レイヤーオフセット | ✅ | タイムライン上の位置 |
| 3Dレイヤー | ❌ | |

#### 描画モード（レイヤー）

| 描画モード | 対応状況 |
|-----------|---------|
| 通常 | ✅ |
| 加算 | ✅ |
| 減算 | ✅ |
| 乗算 | ✅ |
| スクリーン | ✅ |
| 比較（明） | ✅ |
| 比較（暗） | ✅ |
| ディザ合成 | ❌ |
| ダンシングディザ合成 | ❌ |
| 焼き込みカラー | ❌ |
| 焼き込みリニア | ❌ |
| カラー比較（暗） | ❌ |
| 覆い焼きカラー | ❌ |
| 覆い焼きリニア（加算） | ❌ |
| カラー比較（明） | ❌ |
| オーバーレイ | ❌ |
| ソフトライト | ❌ |
| ハードライト | ❌ |
| ビビッドライト | ❌ |
| リニアライト | ❌ |
| ピンライト | ❌ |
| ハードミックス | ❌ |
| 差 | ❌ |
| 除外 | ❌ |
| 除算 | ❌ |
| 色相 | ❌ |
| 彩度 | ❌ |
| カラー | ❌ |
| 輝度 | ❌ |

#### トラックマット

| マットタイプ | 対応状況 |
|------------|---------|
| アルファマット | ✅ |
| アルファ反転マット | ✅ |
| ルミナンスキーマット | ✅ |
| ルミナンス反転マット | ✅ |

---

## 2. マスク

| 機能 | 対応状況 |
|------|---------|
| 反転 | ✅ |
| マスクパス | ✅ |
| マスクの境界のぼかし | ❌ |
| マスクの不透明度 | ✅ |
| マスクの拡張 | ❌ |

### マスクモード

| モード | 対応状況 | 備考 |
|--------|---------|------|
| 追加 | ✅ | |
| 減算 | ✅ | |
| 交差 | ⚠️ | 乗算で代用 |
| 比較（明） | ✅ | |
| 比較（暗） | ✅ | |
| 差 | ❌ | |

---

## 3. シェイプレイヤー

### 3.1 シェイプの種類

| シェイプ | 対応状況 |
|---------|---------|
| グループ | ✅ |
| 長方形 | ✅ |
| 楕円形 | ✅ |
| 多角形 | ✅ |
| パス | ✅ |

### 3.2 シェイプのプロパティ

#### 楕円形

| プロパティ | 対応状況 |
|-----------|---------|
| サイズ | ✅ |
| 位置 | ✅ |

#### 長方形

| プロパティ | 対応状況 |
|-----------|---------|
| サイズ | ✅ |
| 位置 | ✅ |
| 角の丸み | ❌ |

#### 多角形/スター

| プロパティ | 対応状況 |
|-----------|---------|
| 種類（多角形/スター） | ✅ |
| ポイント（頂点数） | ✅ |
| 位置 | ✅ |
| 回転 | ✅ |
| 外側の半径 | ✅ |
| 内側の半径 | ✅ |
| 外側の丸み | ❌ |
| 内側の丸み | ❌ |

#### パス

| プロパティ | 対応状況 |
|-----------|---------|
| パスの形状 | ✅ |
| ベジェハンドル | ✅ |

### 3.3 塗りと線

#### 塗り

| プロパティ | 対応状況 | 備考 |
|-----------|---------|------|
| 描画モード | ⚠️ | 基本的なもののみ対応 |
| コンポジット | ✅ | |
| 塗りの規則 | ✅ | |
| カラー | ✅ | |
| 不透明度 | ✅ | |

#### 線

| プロパティ | 対応状況 | 備考 |
|-----------|---------|------|
| 描画モード | ⚠️ | 基本的なもののみ対応 |
| コンポジット | ✅ | |
| カラー | ✅ | |
| 不透明度 | ✅ | |
| 線幅 | ✅ | 値に制限あり(7以下？) |
| 線端 | ❌ | |
| 線の結合 | ❌ | |
| 角の比率 | ❌ | |
| 破線 | ❌ | |
| テーパー | ❌ | |
| ウェーブ | ❌ | |

---

## 4. アニメーション

### 4.1 キーフレーム

| 機能 | 対応状況 | 備考 |
|------|---------|------|
| リニア補間 | ✅ | |
| ベジェ補間 | ✅ | |
| ホールド補間 | ✅ | |
| イージーイーズ | ✅ | ベジェとして処理 |
| 空間補間 | ⚠️ | 部分的に対応 |
| ロービング | ❌ | |
| 連続ベジェ | ❌ | |

### 4.2 エクスプレッション

| 機能 | 対応状況 | 備考 |
|------|---------|------|
| エクスプレッション | ⚠️ | 書き出し時に全フレームにベイクされます |

**重要**: エクスプレッションは書き出し時に評価され、キーフレームに変換されます。再生時に動的に計算されることはありません。

### 4.3 レイヤー時間

| 機能 | 対応状況 | 備考 |
|------|---------|------|
| タイムリマップ | ✅ | |
| 時間伸縮 | ✅ | 時間反転レイヤーを含む |

---

## 5. マーカー

| 機能 | 対応状況 | 備考 |
|------|---------|------|
| コンポジションマーカー | ✅ | |
| レイヤーマーカー | ✅ | |
| マーカーのコメント | ✅ | |
| マーカーの長さ | ✅ | |

---

## 6. エフェクト

| 機能 | 対応状況 | 備考 |
|------|---------|------|
| すべてのエフェクト | ⚠️ | 自動ベイク機能により実用可能 |

---

## 7. レイヤースタイル

| 機能 | 対応状況 |
|------|---------|
| すべてのレイヤースタイル | ❌ |

---

## 8. 対応フッテージファイル形式

### 8.1 画像

| 形式 | 対応状況 | 備考 |
|------|---------|------|
| PNG | ✅ | |
| JPEG | ✅ | |
| PSD | ✅ | タイムスタンプベースの差分更新でPNGに自動変換 |
| AI | ✅ | タイムスタンプベースの差分更新でPNGに自動変換 |

**PSD/AI自動変換機能**: 書き出しツールは、PSDおよびAIファイルを検出すると、タイムスタンプを比較して更新が必要な場合のみPNGに変換します。レイヤー単位での変換にも対応しています。

### 8.2 動画

| 形式 | 対応状況 | 備考 |
|------|---------|------|
| 一般的な動画形式 | ⚠️ | 問題が出やすいのであまり使いたくない |
| 画像シーケンス | ✅ | |

---

**自動ベイク機能**: `ExportComposition.jsx`書き出しツールは、テキストレイヤーやエフェクトを検出すると自動的にプリコンポーズを作成し、PNG画像シーケンスとしてレンダリングします。この機能により、以下が実現されます：

- 手動でのプリレンダリング作業が不要
- レイヤーのイン点・アウト点を正確に処理
- テキストやエフェクトを含むコンポジションを直接書き出し可能

**注意**: 各種パラメータはベイク時に固定され、再生時にリアルタイムで制御することはできません。
